pico-8 cartridge // http://www.pico-8.com
version 27
__lua__
function spr_to_pts(s)
	px=(s%16)*8
	py=(flr(s/16))*8
	ans={}
	for x=0,7 do
		for y=0,7 do
			c=sget(px+x,py+y)
			if c>0 then
				a={}
				a.x,a.y=x,y
				ans[c]=a
			end
		end
	end
	return ans
end

function pts_to_segments(pts)
	ans={}
	if pts[15]==nil then
		prev=nil
		for c,p in pairs(pts) do
			if prev~=nil then
				a={}
				a.x1,a.y1=prev.x,prev.y
				a.x2,a.y2=p.x,p.y
				ans[#ans+1]=a
			end
			prev=p
		end
	else
		hub=pts[15]
		for c,p in pairs(pts) do
			if c<15 then
				a={}
				a.x1,a.y1=hub.x,hub.y
				a.x2,a.y2=p.x,p.y
				ans[#ans+1]=a
			end
		end
	end
	return ans
end

ltr={}
function load_letter(c)
	pts=spr_to_pts(ord(c)-96)
	seg=pts_to_segments(pts)
	ltr[ord(c)]=seg
end

space={}
function setup_space()
	a={}
	a.x1,a.y1,a.x2,a.y2=3,3,3,3
	space[1]=a
	space[2]=a
	space[3]=a
end

slides={}

function slide_1()
	txt={}
	txt[1]="yay     "
	txt[2]="this    "
	txt[3]="font    "
	txt[4]="could   "
	txt[5]="possibly"
	txt[6]="be used "
	txt[7]="in      "
	txt[8]="a demo  "
	slides[1]=txt
end

function slide_2()
	txt={}
	txt[1]="greetz  "
	txt[2]="        "
	txt[3]="marshals"
	txt[4]="satori  "
	txt[5]="broncs  "
	txt[6]="pg      "
	txt[7]="ftr crew"
	txt[8]="        "
	slides[2]=txt
end

function _init()
	for l=ord("a"),ord("z") do
		load_letter(chr(l))
	end
	setup_space()
	slide_1()
	slide_2()
end

function draw_letter(x,y,s,c)
	for a in all(ltr[ord(c)]) do
		x1=x+(a.x1)*s
		y1=y+(a.y1)*s
		x2=x+(a.x2)*s
		y2=y+(a.y2)*s
		line(x1,y1,x2,y2)
	end
end

function morph_letter(x,y,s,c1,c2,p)
	local t=p
 for a=1,3 do
 	l1=ltr[ord(c1)]
 	if l1==nil then l1=space end
 	l2=ltr[ord(c2)]
 	if l2==nil then l2=space end
 	l1=l1[a]
 	l2=l2[a]
		x1=x+((1-t)*l1.x1+t*l2.x1)*s
		y1=y+((1-t)*l1.y1+t*l2.y1)*s
		x2=x+((1-t)*l1.x2+t*l2.x2)*s
		y2=y+((1-t)*l1.y2+t*l2.y2)*s
		line(x1,y1,x2,y2)
 end
end

function step_function(per,ofs,t)
 t=(per+t-ofs)%per
 if t<1 then return t
 elseif t<per/2 then return 1
 elseif t<per/2+1 then
 	return 1-(t-per/2)
 else
 	return 0
 end
end

function draw_string(x,y,s,s1,s2,p)
	for i=1,#s1 do
		c1=sub(s1,i,i)
		c2=sub(s2,i,i)
		step=step_function(16,p+i/5,t)
		morph_letter(x,y,s,c1,c2,step)
		x+=s*8
	end
end

t=0
function _draw()
	cls()
	for l=1,8 do
		s1=slides[1][l]
		s2=slides[2][l]
		p=l/5
		draw_string(0,16*(l-1),2,s1,s2,p)
	end
	t=t+0.1
end

__gfx__
00000000000200001000000000000020000000100000001000000010000000101000000000010000000000101000000010000000000f00002000004010000020
00000000000000000000000000000010000000000000000000000000000000000000000000000000000000000000000000000000000000000000000040000000
00700700000000004000000000000000000000400000000000000000000000000000000000000000000000000000000000000000000000000000000000000000
0007700040000000000000003000000000000000f0000020f0000020200000400003000000000000000000000000002000000000000000000000000000000000
00077000000000000000003000000000300000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000
00700700000000000000000000000000000000000000000000000000000000000000000000000000400000200000000000000040000000000000000000000000
0000000010000030200000000000004000000020000000303000000000000030200000400032400000030000f000003020000030100200301000003000030000
00000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000
20000000000000202000300000000010100300201000004010000034100200301000004010000020100000200000000000000000000000000000000000000000
00000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000
00000030300000000000004000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000
000000000000000000000000200000300000000000000000000000000000000000000000000f0000000000000000000000000000000000000000000000000000
40000000000000400000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000
00000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000
10000000000000101000000040000000000400002000003000020000000f00003000002000030000300000400000000000000000000000000000000000000000
