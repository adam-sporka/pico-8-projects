pico-8 cartridge // http://www.pico-8.com
version 18
__lua__
--wikipedia implementation--
function xy2d(n,x,y)
	d=0
	s=n/2
	while s>0 do
		rx=0 if (band(x,s)>0) rx=1
		ry=0 if (band(y,s)>0) ry=1
		d+=s*s*((3*rx)^ry)
		x,y=rot(n,x,y,rx,ry)
		s/=2
	end
	return d
end

function d2xy(n,d)
	x,y,t,s,i=0,0,d,1,0
	while s<n do
		rx=band(1,t/2)
		ry=band(1,bxor(t,rx))
		x,y=rot(s,x,y,rx,ry)
		x+=s*rx
		y+=s*ry
		s*=2
		t/=4
		i+=1
	end
	return x,y
end

function rot(n,x,y,rx,ry)
	if ry==0 then
		if rx==1 then
			x=n-1-x
			y=n-1-y
		end
		x,y=y,x
	end
	return x,y
end

-->8
d=0
px=0
py=0
function _draw()
	x,y=d2xy(64,d)
	line(px*2,py*2,x*2,y*2,8+((d/64)%7))
	px=x
	py=y
	d+=1
end
function _init()
	cls()
end


__gfx__
00000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000
00000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000
00700700000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000
00077000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000
00077000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000
00700700000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000
